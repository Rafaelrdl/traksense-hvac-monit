# ‚ö° Construtor de Regras de Monitoramento

## üìã Vis√£o Geral

Sistema completo para criar, editar e gerenciar regras de monitoramento autom√°tico que geram alertas baseados em condi√ß√µes de equipamentos HVAC.

## üéØ Funcionalidades Implementadas

### **1Ô∏è‚É£ Cria√ß√£o de Regras**
Interface visual para configurar regras de alerta com:
- ‚úÖ Nome e descri√ß√£o personalizados
- ‚úÖ Sele√ß√£o de tipo de equipamento
- ‚úÖ Escolha de par√¢metro a monitorar
- ‚úÖ Operador de compara√ß√£o
- ‚úÖ Valor limite (threshold)
- ‚úÖ Dura√ß√£o da condi√ß√£o
- ‚úÖ N√≠vel de severidade
- ‚úÖ A√ß√µes autom√°ticas ao disparar

### **2Ô∏è‚É£ Edi√ß√£o de Regras**
- ‚úÖ Modificar qualquer par√¢metro da regra
- ‚úÖ Preview em tempo real da l√≥gica
- ‚úÖ Valida√ß√£o de campos obrigat√≥rios

### **3Ô∏è‚É£ Gerenciamento de Regras**
- ‚úÖ Listar todas as regras configuradas
- ‚úÖ Ativar/Desativar regras via Switch
- ‚úÖ Excluir regras
- ‚úÖ Visualizar hist√≥rico de disparo
- ‚úÖ Cards informativos com status

---

## üèóÔ∏è Estrutura de uma Regra

### **Modelo de Dados:**
```typescript
interface MonitoringRule {
  id: string                    // Identificador √∫nico
  name: string                  // Nome da regra
  description: string           // Descri√ß√£o do prop√≥sito
  enabled: boolean              // Ativa/Inativa
  assetType: string            // Tipo de equipamento
  parameter: string            // Par√¢metro monitorado
  operator: string             // Operador (>, <, ==, >=, <=)
  threshold: number            // Valor limite
  unit: string                 // Unidade de medida
  duration: number             // Dura√ß√£o em minutos
  severity: string             // Critical/High/Medium/Low
  actions: string[]            // Lista de a√ß√µes
  createdAt: Date              // Data de cria√ß√£o
  lastTriggered?: Date         // √öltimo disparo
}
```

---

## üé® Tipos de Equipamentos Suportados

```typescript
1. AHU - Air Handling Unit
2. Chiller
3. VRF - Variable Refrigerant Flow
4. RTU - Rooftop Unit
5. Boiler
6. Cooling Tower
```

---

## üìä Par√¢metros Monitor√°veis

| Par√¢metro | Descri√ß√£o | Unidade |
|-----------|-----------|---------|
| **temp_supply** | Temperatura de Fornecimento | ¬∞C |
| **temp_return** | Temperatura de Retorno | ¬∞C |
| **pressure_suction** | Press√£o de Suc√ß√£o | psi |
| **pressure_discharge** | Press√£o de Descarga | psi |
| **dp_filter** | ŒîP Filtro (diferencial) | Pa |
| **power_kw** | Consumo de Energia | kW |
| **vibration** | Vibra√ß√£o | mm/s |
| **humidity** | Umidade | % |
| **flow_rate** | Vaz√£o | L/min |
| **speed_rpm** | Velocidade | RPM |

---

## üî¢ Operadores Dispon√≠veis

```
>   Maior que
<   Menor que
==  Igual a
>=  Maior ou igual
<=  Menor ou igual
```

---

## üö® N√≠veis de Severidade

### **üî¥ Cr√≠tico (Critical)**
- Cor: Vermelho
- Uso: Requer a√ß√£o imediata
- Exemplos: Falha de equipamento, temperatura extrema

### **üü† Alto (High)**
- Cor: Laranja
- Uso: Necessita aten√ß√£o priorit√°ria
- Exemplos: Consumo anormal, press√£o alta

### **üü° M√©dio (Medium)**
- Cor: Amarelo
- Uso: Aten√ß√£o moderada necess√°ria
- Exemplos: Manuten√ß√£o pr√≥xima, filtro em alerta

### **üîµ Baixo (Low)**
- Cor: Azul
- Uso: Informativo
- Exemplos: Status normal, informa√ß√µes gerais

---

## üìß A√ß√µes Autom√°ticas

### **Tipos de A√ß√µes:**
```
‚úâÔ∏è  Email        - Enviar notifica√ß√£o por email
üì±  SMS          - Enviar mensagem de texto
üîî  Push         - Notifica√ß√£o no navegador/app
üìù  Log          - Registrar no sistema de logs
üîó  Webhook      - Chamar endpoint HTTP externo
```

### **Configura√ß√£o Multi-A√ß√£o:**
Uma regra pode executar **m√∫ltiplas a√ß√µes simultaneamente** ao disparar.

---

## üéØ Exemplos de Regras

### **Exemplo 1: Alta Press√£o Chiller**
```yaml
Nome: Alta Press√£o Chiller
Descri√ß√£o: Alerta quando press√£o de descarga excede limite
Equipamento: Chiller
Condi√ß√£o: Press√£o de Descarga > 300 psi
Dura√ß√£o: 5 minutos
Severidade: Cr√≠tico
A√ß√µes: [Email, Push, Log]
```

**L√≥gica:**
> SE `pressure_discharge` > 300 psi por 5 minutos  
> ENT√ÉO gerar alerta CR√çTICO e executar: Email + Push + Log

---

### **Exemplo 2: ŒîP Filtro Elevado**
```yaml
Nome: ŒîP Filtro Elevado
Descri√ß√£o: Necessidade de troca de filtro
Equipamento: AHU
Condi√ß√£o: ŒîP Filtro > 250 Pa
Dura√ß√£o: 10 minutos
Severidade: Alto
A√ß√µes: [Email, Log]
```

**L√≥gica:**
> SE `dp_filter` > 250 Pa por 10 minutos  
> ENT√ÉO gerar alerta ALTO e executar: Email + Log

---

### **Exemplo 3: Baixa Temperatura**
```yaml
Nome: Baixa Temperatura
Descri√ß√£o: Temperatura abaixo do setpoint
Equipamento: AHU
Condi√ß√£o: Temperatura Fornecimento < 10¬∞C
Dura√ß√£o: 15 minutos
Severidade: M√©dio
A√ß√µes: [Push, Log]
```

**L√≥gica:**
> SE `temp_supply` < 10¬∞C por 15 minutos  
> ENT√ÉO gerar alerta M√âDIO e executar: Push + Log

---

## üé® Interface do Usu√°rio

### **Listagem de Regras**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚ö° Construtor de Regras        [+ Nova Regra]     ‚îÇ
‚îÇ  Configure regras de monitoramento...               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ Alta Press√£o Chiller  [Ativa] [Cr√≠tico]      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ Alerta quando press√£o excede limite          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ [Chiller] ‚Üí pressure_discharge > 300 psi...  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ Criada: 15/09/2024  √öltimo: 08/10/2024       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                    [‚ö´][‚ãÆ]    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ ŒîP Filtro Elevado  [Ativa] [Alto]           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ Necessidade de troca de filtro               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ [AHU] ‚Üí dp_filter > 250 Pa por 10 min       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ Criada: 20/09/2024  √öltimo: 09/10/2024       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                    [‚ö´][‚ãÆ]    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Dialog de Cria√ß√£o/Edi√ß√£o**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚ö° Nova Regra de Monitoramento    [X] ‚îÇ
‚îÇ  Configure os par√¢metros...            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Nome da Regra *                       ‚îÇ
‚îÇ  [Alta Press√£o Chiller____________]    ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  Descri√ß√£o                             ‚îÇ
‚îÇ  [Alerta quando...________________]    ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  Tipo de Ativo *                       ‚îÇ
‚îÇ  [Chiller ‚ñº]                           ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  Par√¢metro a Monitorar *               ‚îÇ
‚îÇ  [Press√£o de Descarga (psi) ‚ñº]        ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  Operador    Valor Limite *            ‚îÇ
‚îÇ  [> ‚ñº]       [300_________]            ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  Dura√ß√£o (minutos)                     ‚îÇ
‚îÇ  [5___]                                ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  Severidade do Alerta                  ‚îÇ
‚îÇ  [Cr√≠tico] [Alto] [M√©dio] [Baixo]     ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  A√ß√µes ao Disparar                     ‚îÇ
‚îÇ  ‚òë Enviar Email                        ‚îÇ
‚îÇ  ‚òë Notifica√ß√£o Push                    ‚îÇ
‚îÇ  ‚òë Registrar no Log                    ‚îÇ
‚îÇ  ‚òê Enviar SMS                          ‚îÇ
‚îÇ  ‚òê Webhook                             ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  Preview da Regra:                     ‚îÇ
‚îÇ  SE Press√£o de Descarga > 300 psi      ‚îÇ
‚îÇ  por 5 minutos                         ‚îÇ
‚îÇ  ENT√ÉO gerar alerta Cr√≠tico            ‚îÇ
‚îÇ                                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ              [Cancelar] [‚úì Criar Regra]‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß Funcionalidades Detalhadas

### **Criar Nova Regra**
```typescript
1. Clicar em "Nova Regra"
2. Preencher formul√°rio:
   - Nome (obrigat√≥rio)
   - Descri√ß√£o (opcional)
   - Tipo de Ativo (obrigat√≥rio)
   - Par√¢metro (obrigat√≥rio)
   - Operador (padr√£o: >)
   - Valor Limite (obrigat√≥rio)
   - Dura√ß√£o (padr√£o: 5 min)
   - Severidade (padr√£o: Medium)
   - A√ß√µes (m√≠nimo 1)
3. Visualizar preview da l√≥gica
4. Clicar em "Criar Regra"
5. Toast de confirma√ß√£o
6. Regra aparece na lista (ativa)
```

### **Editar Regra Existente**
```typescript
1. Clicar no menu "‚ãÆ" da regra
2. Selecionar "Editar"
3. Dialog abre com dados preenchidos
4. Modificar campos desejados
5. Clicar em "Salvar Altera√ß√µes"
6. Toast de confirma√ß√£o
7. Regra atualizada na lista
```

### **Ativar/Desativar Regra**
```typescript
1. Usar o Switch (‚ö´) no card da regra
2. Toggle entre Ativa/Inativa
3. Toast de confirma√ß√£o
4. Card visual muda (opacidade)
5. Badge atualizado
```

### **Excluir Regra**
```typescript
1. Clicar no menu "‚ãÆ" da regra
2. Selecionar "Excluir" (texto vermelho)
3. Regra removida da lista
4. Toast de confirma√ß√£o
```

---

## üéØ Valida√ß√µes Implementadas

### **Campos Obrigat√≥rios:**
```
‚úì Nome da regra
‚úì Tipo de ativo
‚úì Par√¢metro
‚úì Valor limite
```

### **Valida√ß√£o de Formul√°rio:**
```typescript
if (!name || !assetType || !parameter || !threshold) {
  toast.error('Campos obrigat√≥rios')
  return // N√£o salva
}
```

### **Feedback Visual:**
- üî¥ Campos vazios: Falta preencher
- üü¢ Preview: Mostra l√≥gica em tempo real
- üìù Toast: Confirma√ß√£o de todas as a√ß√µes

---

## üìä Dados Mock Inclu√≠dos

### **3 Regras de Exemplo:**

**1. Alta Press√£o Chiller**
- ‚úÖ Ativa
- üî¥ Cr√≠tico
- √öltimo disparo: 08/10/2024

**2. ŒîP Filtro Elevado**
- ‚úÖ Ativa
- üü† Alto
- √öltimo disparo: 09/10/2024

**3. Baixa Temperatura**
- ‚ùå Inativa
- üü° M√©dio
- Nunca disparou

---

## üíª Arquitetura T√©cnica

### **Componente Principal**
```typescript
// src/components/alerts/RuleBuilder.tsx
export const RuleBuilder: React.FC
```

### **Estado Local**
```typescript
const [rules, setRules] = useState<MonitoringRule[]>([...])
const [isDialogOpen, setIsDialogOpen] = useState(false)
const [editingRule, setEditingRule] = useState<MonitoringRule | null>(null)
const [formData, setFormData] = useState({...})
```

### **Opera√ß√µes CRUD**
```typescript
handleCreateRule()    // Abre dialog vazio
handleEditRule(rule)  // Abre dialog preenchido
handleSaveRule()      // Cria ou atualiza
handleDeleteRule(id)  // Remove da lista
handleToggleRule(id)  // Ativa/desativa
```

---

## üé® Componentes shadcn/ui Utilizados

```typescript
‚úÖ Dialog, DialogContent, DialogHeader, DialogFooter
‚úÖ Button
‚úÖ Input
‚úÖ Label
‚úÖ Select, SelectContent, SelectItem, SelectTrigger
‚úÖ Badge
‚úÖ Switch
‚úÖ Separator
‚úÖ ScrollArea
‚úÖ DropdownMenu, DropdownMenuItem
```

### **√çcones Lucide React**
```typescript
Plus, Trash2, Edit, Activity, AlertTriangle,
CheckCircle2, Zap, Clock, TrendingUp, TrendingDown,
Equal, MoreVertical
```

---

## üß™ Como Testar

### **1. Criar Nova Regra**
```bash
‚úì Clicar "Nova Regra"
‚úì Preencher nome: "Teste Alta Vibra√ß√£o"
‚úì Selecionar Ativo: "Chiller"
‚úì Selecionar Par√¢metro: "Vibra√ß√£o (mm/s)"
‚úì Operador: ">"
‚úì Valor: "10"
‚úì Dura√ß√£o: "3"
‚úì Severidade: "Alto"
‚úì A√ß√µes: Email + Push
‚úì Ver preview atualizar
‚úì Clicar "Criar Regra"
‚úì Ver toast de sucesso
‚úì Ver regra na lista
```

### **2. Editar Regra Existente**
```bash
‚úì Clicar "‚ãÆ" em "Alta Press√£o Chiller"
‚úì Clicar "Editar"
‚úì Mudar valor limite: 300 ‚Üí 350
‚úì Adicionar a√ß√£o: SMS
‚úì Clicar "Salvar Altera√ß√µes"
‚úì Ver toast de sucesso
‚úì Ver mudan√ßas no card
```

### **3. Ativar/Desativar**
```bash
‚úì Clicar Switch da regra "Baixa Temperatura"
‚úì Ver toast: "Regra ativada"
‚úì Ver badge mudar para "Ativa"
‚úì Ver card ficar opaco ao desativar
```

### **4. Excluir Regra**
```bash
‚úì Clicar "‚ãÆ" em qualquer regra
‚úì Clicar "Excluir" (vermelho)
‚úì Ver toast: "Regra removida"
‚úì Regra desaparece da lista
```

---

## üîÑ Fluxo de Trabalho T√≠pico

### **Cen√°rio: Monitorar Consumo de Energia**

```
1. Operador identifica necessidade
   "Quero saber quando Chillers gastam muito"

2. Abre Alertas & Regras ‚Üí Construtor de Regras

3. Clica "Nova Regra"

4. Preenche:
   Nome: "Consumo Excessivo Chiller"
   Descri√ß√£o: "Alerta de consumo anormal"
   Ativo: Chiller
   Par√¢metro: Consumo de Energia (kW)
   Condi√ß√£o: > 500 kW
   Dura√ß√£o: 20 minutos
   Severidade: M√©dio
   A√ß√µes: Email + Log

5. Revisa preview:
   "SE Consumo de Energia > 500 kW por 20 minutos
    ENT√ÉO gerar alerta M√©dio"

6. Clica "Criar Regra"

7. Regra ativa e monitorando
   Quando condi√ß√£o for atendida ‚Üí Alerta gerado
```

---

## üìù TODO - Pr√≥ximos Passos

### **Backend Integration**
```typescript
// APIs a implementar

// Listar regras
GET /api/monitoring/rules

// Criar regra
POST /api/monitoring/rules
{
  name: string,
  assetType: string,
  parameter: string,
  operator: string,
  threshold: number,
  duration: number,
  severity: string,
  actions: string[]
}

// Atualizar regra
PUT /api/monitoring/rules/:id

// Deletar regra
DELETE /api/monitoring/rules/:id

// Ativar/Desativar
PATCH /api/monitoring/rules/:id/toggle

// Hist√≥rico de disparos
GET /api/monitoring/rules/:id/triggers
```

### **Funcionalidades Futuras**
```typescript
// L√≥gica Avan√ßada
- [ ] Regras compostas (AND/OR)
- [ ] M√∫ltiplas condi√ß√µes
- [ ] Faixas de valores (entre X e Y)
- [ ] Compara√ß√£o com m√©dia hist√≥rica
- [ ] Rate of change (taxa de varia√ß√£o)

// A√ß√µes Avan√ßadas
- [ ] Escalonamento de alertas
- [ ] A√ß√µes sequenciais com delay
- [ ] Script customizado
- [ ] Integra√ß√£o com CMMS
- [ ] Criar ticket automaticamente

// UI/UX
- [ ] Drag & drop para reordenar
- [ ] Filtros e busca de regras
- [ ] Tags e categorias
- [ ] Duplicar regra
- [ ] Importar/Exportar regras (JSON)
- [ ] Template de regras comuns
- [ ] Wizard step-by-step
- [ ] Modo avan√ßado (c√≥digo)

// Analytics
- [ ] Dashboard de efetividade
- [ ] Taxa de disparo por regra
- [ ] Falsos positivos
- [ ] Tempo m√©dio de resolu√ß√£o
- [ ] Heatmap de alertas

// Testes
- [ ] Testar regra antes de salvar
- [ ] Simular com dados hist√≥ricos
- [ ] Modo sandbox
```

---

## üéØ Benef√≠cios do Sistema

### **Para Operadores:**
- ‚ö° Alertas proativos autom√°ticos
- üéØ Configura√ß√£o visual intuitiva
- üîÑ Flexibilidade total
- üìä Vis√£o clara das regras ativas

### **Para Gestores:**
- üìà Monitoramento 24/7 automatizado
- üí∞ Redu√ß√£o de custos operacionais
- üõ°Ô∏è Preven√ß√£o de falhas cr√≠ticas
- üìã Auditoria completa

### **Para T√©cnicos:**
- üîß Manuten√ß√£o preventiva eficiente
- üì± Notifica√ß√µes em tempo real
- üóÇÔ∏è Hist√≥rico de eventos
- üéØ Prioriza√ß√£o inteligente

---

## ‚úÖ Status Final

- ‚úÖ **Interface completa e funcional**
- ‚úÖ **CRUD completo de regras**
- ‚úÖ **10 par√¢metros monitor√°veis**
- ‚úÖ **6 tipos de equipamentos**
- ‚úÖ **4 n√≠veis de severidade**
- ‚úÖ **5 tipos de a√ß√µes**
- ‚úÖ **Valida√ß√µes implementadas**
- ‚úÖ **Feedback com toasts**
- ‚úÖ **Preview em tempo real**
- ‚úÖ **Responsivo e acess√≠vel**
- ‚è≥ **Aguardando integra√ß√£o backend**

---

**Desenvolvido para TrakSense HVAC Monitoring Platform** üè¢‚ùÑÔ∏è

*Construtor de Regras - Monitoramento Inteligente e Autom√°tico!* ‚ö°üéØ
