# ‚úÖ Performance Condicional + CTA TrakNor - Asset Details

## üìÖ Data: 15 de Outubro de 2025

---

## üéØ Objetivo

Implementar **performance condicional** baseada na disponibilidade de sensores e adicionar **CTA persuasivo** para TrakNor na aba de Manuten√ß√£o.

---

## üì¶ Arquivos Criados/Modificados

### ‚úÖ Novos Arquivos

1. **`/workspaces/spark-template/src/store/features.ts`** (35 linhas)
   - Store Zustand com persist para feature flags
   - Flags: `hidePerformanceWhenNoSensors`, `enableTrakNorCTA`

2. **`/workspaces/spark-template/src/store/cta.ts`** (52 linhas)
   - Store para gerenciar CTAs dispensados
   - Persist√™ncia com serializa√ß√£o customizada para Set<string>

3. **`/workspaces/spark-template/src/lib/hasPerformanceTelemetry.ts`** (138 linhas)
   - Fun√ß√£o `hasPerformanceTelemetry()` - detecta sensores m√≠nimos
   - Fun√ß√£o `reasonMissingTelemetry()` - lista sensores faltantes
   - Mapeamento por tipo de equipamento

4. **`/workspaces/spark-template/src/components/assets/PerformanceEmpty.tsx`** (148 linhas)
   - Componente de estado vazio para aba Performance
   - Lista sensores faltantes + guia de instala√ß√£o
   - Links para documenta√ß√£o e suporte

5. **`/workspaces/spark-template/src/components/assets/TrakNorCTA.tsx`** (109 linhas)
   - CTA persuasivo para TrakNor
   - Bot√£o "Dispensar" com persist√™ncia
   - Integra√ß√£o com ContactSalesDialog

6. **`/workspaces/spark-template/src/components/common/ContactSalesDialog.tsx`** (162 linhas)
   - Modal de contato com formul√°rio completo
   - Valida√ß√£o de email
   - Fallback para mailto:

### üîÑ Arquivos Modificados

7. **`/workspaces/spark-template/src/components/pages/AssetDetailPage.tsx`**
   - Integra√ß√£o da l√≥gica condicional de performance
   - CTA TrakNor na aba Manuten√ß√£o
   - ContactSalesDialog global

---

## üöÄ Features Implementadas

### A) Performance Condicional

#### 1. Detec√ß√£o Inteligente de Telemetria

**L√≥gica de Sensores M√≠nimos:**
```typescript
const REQUIRED_SENSORS_BY_TYPE = {
  CHILLER: ['power_kw', 'temp_supply', 'temp_return'],
  AHU: ['temp_supply', 'airflow'],
  PUMP: ['power_kw', 'pressure_suction'],
  FAN_COIL: ['temp_supply', 'temp_return'],
  BOILER: ['power_kw', 'temp_supply'],
  COOLING_TOWER: ['power_kw', 'temp_supply'],
  VRF: ['power_kw', 'temp_supply'],
  RTU: ['power_kw', 'temp_supply'],
  DEFAULT: ['power_kw'],
};
```

**Fun√ß√£o de Valida√ß√£o:**
```typescript
export function hasPerformanceTelemetry(
  asset: HVACAsset,
  sensors?: Sensor[]
): boolean {
  // Verifica se todos os sensores necess√°rios est√£o:
  // 1. Instalados
  // 2. Online
  // 3. Com leitura v√°lida
}
```

#### 2. Feature Flag: `hidePerformanceWhenNoSensors`

**Comportamento:**
```
true  ‚Üí Aba Performance oculta quando sem sensores
false ‚Üí Aba Performance exibida, mas com <PerformanceEmpty />
```

**Uso:**
```typescript
const hidePerformanceWhenNoSensors = useFeaturesStore(
  state => state.hidePerformanceWhenNoSensors
);

const showPerformanceTab = !hidePerformanceWhenNoSensors || hasPerf;
```

#### 3. Componente PerformanceEmpty

**Estrutura:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ö†Ô∏è Alert: Dados Indispon√≠veis           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìã Card: Sensores Necess√°rios           ‚îÇ
‚îÇ   ‚Ä¢ Pot√™ncia (kW) (n√£o instalado)       ‚îÇ
‚îÇ   ‚Ä¢ Temperatura de Insuflamento (offline)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ùì Card: Como Habilitar                  ‚îÇ
‚îÇ   1Ô∏è‚É£ Instalar sensores f√≠sicos          ‚îÇ
‚îÇ   2Ô∏è‚É£ Configurar gateway IoT             ‚îÇ
‚îÇ   3Ô∏è‚É£ Vincular na plataforma             ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ   [Guia de Instala√ß√£o] [Falar com Suporte]‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üí° Card: Benef√≠cios da Telemetria       ‚îÇ
‚îÇ   ‚úì Monitoramento em tempo real         ‚îÇ
‚îÇ   ‚úì Detec√ß√£o precoce de degrada√ß√£o      ‚îÇ
‚îÇ   ‚úì Otimiza√ß√£o autom√°tica                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Acessibilidade:**
- ‚úÖ Contraste AA (WCAG 2.1)
- ‚úÖ Tema claro/escuro
- ‚úÖ Links externos com `rel="noopener noreferrer"`

---

### B) CTA TrakNor na Aba Manuten√ß√£o

#### 1. Componente TrakNorCTA

**Design:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üîß Manuten√ß√£o Inteligente com TrakNor  ‚ùå‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Eleve sua gest√£o ao pr√≥ximo n√≠vel        ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ ‚ö° Alertas preditivos e prioriza√ß√£o      ‚îÇ
‚îÇ ‚è±Ô∏è Ordem de servi√ßo em 1 clique          ‚îÇ
‚îÇ ‚úì Integra√ß√£o com sensores e hist√≥rico   ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ üéÅ Oferta: Integra√ß√£o gratuita para     ‚îÇ
‚îÇ    clientes TrakSense HVAC               ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ [Quero Contratar] [Saiba Mais]          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚ÑπÔ∏è TrakNor √© desenvolvido pela mesma     ‚îÇ
‚îÇ    equipe do TrakSense.                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Features:**
- ‚úÖ Dispens√°vel com persist√™ncia
- ‚úÖ Feature flag `enableTrakNorCTA`
- ‚úÖ Gradiente blue-50/indigo-50
- ‚úÖ Tema claro/escuro

#### 2. Feature Flag: `enableTrakNorCTA`

**Controle de Exibi√ß√£o:**
```typescript
const enableTrakNorCTA = useFeaturesStore(
  state => state.enableTrakNorCTA
);

const ctaKey = `traknor:${orgId}`;
const isDismissed = useCTAStore(state => state.isDismissed(ctaKey));

// CTA s√≥ aparece se:
// 1. enableTrakNorCTA === true
// 2. N√£o foi dispensado anteriormente
if (isDismissed || !enableTrakNorCTA) return null;
```

#### 3. Store de CTA (Persist√™ncia)

**Estrutura:**
```typescript
interface CTAState {
  dismissedKeys: Set<string>;     // Set de CTAs dispensados
  isDismissed: (key: string) => boolean;
  dismiss: (key: string) => void;
  undismiss: (key: string) => void;
  clearAll: () => void;
}
```

**Serializa√ß√£o:**
```typescript
// localStorage: ts:cta
{
  "state": {
    "dismissedKeys": ["traknor:default", "traknor:org123"]
  }
}
```

#### 4. ContactSalesDialog

**Formul√°rio:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìß Fale com Nossa Equipe           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Nome Completo *                    ‚îÇ
‚îÇ [________________]                 ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ Empresa *                          ‚îÇ
‚îÇ [________________]                 ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ E-mail *                           ‚îÇ
‚îÇ [________________]                 ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ Telefone (opcional)                ‚îÇ
‚îÇ [________________]                 ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ Mensagem (opcional)                ‚îÇ
‚îÇ [________________]                 ‚îÇ
‚îÇ [________________]                 ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ    [Cancelar]  [Enviar Solicita√ß√£o]‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Valida√ß√µes:**
- ‚úÖ Nome, Empresa, E-mail obrigat√≥rios
- ‚úÖ Valida√ß√£o de formato de email
- ‚úÖ Estado de loading durante envio

**Envio:**
```typescript
// Fallback: mailto link
const mailtoLink = `mailto:vendas@traknor.com?subject=${subject}&body=${body}`;
window.location.href = mailtoLink;

// Toast de confirma√ß√£o
toast.success('Solicita√ß√£o enviada! Nossa equipe entrar√° em contato.');
```

---

## üìä Integra√ß√£o no AssetDetailPage

### Fluxo de Decis√£o

```typescript
// 1. Detectar telemetria
const hasPerf = hasPerformanceTelemetry(selectedAsset, sensors);
const missingSensors = hasPerf ? [] : reasonMissingTelemetry(selectedAsset, sensors);

// 2. Verificar feature flag
const hidePerformanceWhenNoSensors = useFeaturesStore(
  state => state.hidePerformanceWhenNoSensors
);

// 3. Decidir exibi√ß√£o
const showPerformanceTab = !hidePerformanceWhenNoSensors || hasPerf;
```

### Tabs Condicionais

```typescript
{[
  { id: 'je02', label: 'Monitoramento' },
  { id: 'telemetry', label: 'Telemetria' },
  { id: 'performance', label: 'Performance', conditional: showPerformanceTab },
  { id: 'maintenance', label: 'Manuten√ß√£o' },
  // ...
]
  .filter(tab => tab.conditional !== false)
  .map(tab => <TabButton {...tab} />)
}
```

### Conte√∫do da Aba Performance

```typescript
{activeTab === 'performance' && showPerformanceTab && (
  <div>
    {hasPerf ? (
      <PerformancePanel data={performanceData} />
    ) : (
      <PerformanceEmpty asset={selectedAsset} missingSensors={missingSensors} />
    )}
  </div>
)}
```

### Aba Manuten√ß√£o com CTA

```typescript
{activeTab === 'maintenance' && (
  <div className="space-y-6">
    {/* CTA TrakNor (no topo) */}
    <TrakNorCTA 
      orgId="default" 
      onContactClick={() => setContactDialogOpen(true)} 
    />
    
    {/* Summary Cards */}
    <MaintenanceSummary />
    
    {/* Tasks List */}
    <MaintenanceTasks />
  </div>
)}
```

---

## üß™ Cen√°rios de Teste

### Teste 1: Asset com Sensores Completos

**Given:** Chiller com sensores `power_kw`, `temp_supply`, `temp_return` online
**When:** Navegar para aba Performance
**Then:**
- ‚úÖ Aba Performance vis√≠vel
- ‚úÖ Gr√°fico de Performance renderizado
- ‚úÖ Sem PerformanceEmpty

### Teste 2: Asset Sem Sensores (flag=true)

**Given:** AHU sem sensores, `hidePerformanceWhenNoSensors=true`
**When:** Abrir detalhes do asset
**Then:**
- ‚úÖ Aba Performance **n√£o aparece** na navega√ß√£o
- ‚úÖ Tabs: Monitoramento, Telemetria, Manuten√ß√£o, Alertas, Raw

### Teste 3: Asset Sem Sensores (flag=false)

**Given:** AHU sem sensores, `hidePerformanceWhenNoSensors=false`
**When:** Navegar para aba Performance
**Then:**
- ‚úÖ Aba Performance vis√≠vel
- ‚úÖ `<PerformanceEmpty />` renderizado
- ‚úÖ Lista sensores faltantes: "Temperatura de Insuflamento (n√£o instalado)", "Vaz√£o de Ar (n√£o instalado)"

### Teste 4: CTA TrakNor (primeira vez)

**Given:** Usu√°rio nunca dispensou CTA
**When:** Navegar para aba Manuten√ß√£o
**Then:**
- ‚úÖ CTA TrakNor vis√≠vel no topo
- ‚úÖ Bot√µes "Quero Contratar" e "Saiba Mais" funcionais
- ‚úÖ Bot√£o X vis√≠vel

### Teste 5: CTA TrakNor (dispensado)

**Given:** Usu√°rio clicou em "X" do CTA
**When:** Navegar para aba Manuten√ß√£o novamente
**Then:**
- ‚úÖ CTA TrakNor **n√£o aparece**
- ‚úÖ localStorage cont√©m `{"dismissedKeys":["traknor:default"]}`

### Teste 6: Modal de Contato

**Given:** CTA TrakNor vis√≠vel
**When:** Clicar em "Quero Contratar"
**Then:**
- ‚úÖ `ContactSalesDialog` abre
- ‚úÖ Campos Nome, Empresa, E-mail marcados com *
- ‚úÖ Ao submeter sem preencher ‚Üí toast de erro

### Teste 7: Envio de Contato

**Given:** Modal aberto, campos preenchidos corretamente
**When:** Clicar em "Enviar Solicita√ß√£o"
**Then:**
- ‚úÖ Loading state durante envio
- ‚úÖ `mailto:` link aberto com dados pr√©-preenchidos
- ‚úÖ Toast de sucesso exibido
- ‚úÖ Modal fecha automaticamente

---

## üé® Design Tokens e Tema

### Cores

**PerformanceEmpty:**
```css
/* Alert */
.alert-orange {
  border-color: rgb(254 215 170 / 1);      /* orange-200 */
  background: rgb(255 247 237 / 0.7);       /* orange-50/70 */
  color: rgb(24 24 27 / 1);                 /* zinc-900 */
}

/* Dark mode */
.dark .alert-orange {
  border-color: rgb(251 146 60 / 0.3);     /* orange-400/30 */
  background: rgb(249 115 22 / 0.1);        /* orange-500/10 */
  color: rgb(244 244 245 / 1);              /* zinc-100 */
}
```

**TrakNorCTA:**
```css
.cta-gradient {
  border-color: rgb(191 219 254 / 1);       /* blue-200 */
  background: linear-gradient(
    to bottom right,
    rgb(239 246 255 / 0.8),                /* blue-50/80 */
    rgb(238 242 255 / 0.5)                 /* indigo-50/50 */
  );
}

/* Dark mode */
.dark .cta-gradient {
  border-color: rgb(30 64 175 / 0.5);     /* blue-800/50 */
  background: linear-gradient(
    to bottom right,
    rgb(23 37 84 / 0.3),                  /* blue-950/30 */
    rgb(30 27 75 / 0.2)                   /* indigo-950/20 */
  );
}
```

### Acessibilidade

**Contraste M√≠nimo (WCAG AA):**
- ‚úÖ Texto pequeno (< 18px): 4.5:1
- ‚úÖ Texto grande (‚â• 18px): 3:1
- ‚úÖ Elementos interativos: 3:1

**Estados de Foco:**
```css
.focus-visible:focus-visible {
  outline: 2px solid rgb(var(--ring));
  outline-offset: 2px;
}
```

---

## üìà M√©tricas de Impacto

### Bundle Size

**Antes:** 2,105.82 kB (gzip: 641.25 kB)
**Depois:** 2,119.50 kB (gzip: 644.82 kB)

**Impacto:** +13.68 kB (+0.65%) minified, +3.57 kB (+0.56%) gzip

### Novos Componentes

| Componente | Tamanho | Fun√ß√£o |
|------------|---------|--------|
| `hasPerformanceTelemetry.ts` | 138 linhas | L√≥gica de detec√ß√£o |
| `PerformanceEmpty.tsx` | 148 linhas | UI estado vazio |
| `TrakNorCTA.tsx` | 109 linhas | CTA persuasivo |
| `ContactSalesDialog.tsx` | 162 linhas | Modal de contato |
| `features.ts` | 35 linhas | Feature flags |
| `cta.ts` | 52 linhas | Persist√™ncia CTA |

**Total:** 644 linhas de c√≥digo novo

---

## ‚úÖ Checklist de Implementa√ß√£o

### Performance Condicional
- [x] `hasPerformanceTelemetry()` detecta sensores m√≠nimos
- [x] `reasonMissingTelemetry()` lista sensores faltantes
- [x] Feature flag `hidePerformanceWhenNoSensors` funcional
- [x] Aba Performance oculta quando flag=true e sem sensores
- [x] `PerformanceEmpty` renderiza quando flag=false e sem sensores
- [x] Lista sensores faltantes √© exibida corretamente
- [x] Links para documenta√ß√£o e suporte funcionais

### CTA TrakNor
- [x] CTA renderiza na aba Manuten√ß√£o
- [x] Feature flag `enableTrakNorCTA` funcional
- [x] Bot√£o "Dispensar" persiste estado
- [x] CTA n√£o reaparece ap√≥s dispensar
- [x] Bot√£o "Quero Contratar" abre modal
- [x] Bot√£o "Saiba Mais" abre link externo
- [x] Gradiente e estilo consistentes com design system

### Modal de Contato
- [x] Formul√°rio com campos obrigat√≥rios
- [x] Valida√ß√£o de email funcional
- [x] Estado de loading durante envio
- [x] Fallback `mailto:` implementado
- [x] Toast de sucesso/erro
- [x] Modal fecha ap√≥s envio

### Integra√ß√£o
- [x] `AssetDetailPage` integra todos os componentes
- [x] Tabs condicionais funcionando
- [x] Performance tab exibe corretamente baseado em sensores
- [x] CTA aparece no topo da aba Manuten√ß√£o
- [x] ContactDialog global gerenciado por estado

### Build & Qualidade
- [x] TypeScript: 0 erros
- [x] ESLint: 0 warnings
- [x] Build passa em 13.63s
- [x] Bundle size aceit√°vel (+0.65%)
- [x] Tema claro/escuro funcional
- [x] Contraste AA garantido

---

## üöÄ Status Final

```bash
‚úì Build: 13.63s
‚úì TypeScript: 0 erros
‚úì ESLint: 0 warnings
‚úì Bundle: 2,119.50 kB (gzip: 644.82 kB)
‚úì CSS: 532.81 kB (gzip: 93.08 kB)
‚úì +8 novos m√≥dulos transformados
‚úì Performance condicional: 100% funcional
‚úì CTA TrakNor: 100% funcional
‚úì ContactDialog: 100% funcional
‚úì Pronto para produ√ß√£o
```

---

## üìö Documenta√ß√£o Adicional

### Para Desenvolvedores

**Como desabilitar Performance tab:**
```typescript
import { useFeaturesStore } from '@/store/features';

// No console do navegador ou em c√≥digo
useFeaturesStore.getState().setHidePerformanceWhenNoSensors(true);
```

**Como desabilitar CTA TrakNor:**
```typescript
import { useFeaturesStore } from '@/store/features';

useFeaturesStore.getState().setEnableTrakNorCTA(false);
```

**Como limpar CTAs dispensados:**
```typescript
import { useCTAStore } from '@/store/cta';

useCTAStore.getState().clearAll();
```

### Para Testes

**Simular asset sem sensores:**
```typescript
const testAsset: HVACAsset = {
  id: 'test-001',
  tag: 'TEST-AHU-001',
  type: 'AHU',
  specifications: {
    equipmentType: 'AHU'
  },
  // ... outros campos
};

// Passar array vazio de sensores
hasPerformanceTelemetry(testAsset, []); // ‚Üí false
```

---

**Implementa√ß√£o:** ‚úÖ **100% COMPLETA**
**Pronto para produ√ß√£o:** ‚úÖ **SIM**
**Documenta√ß√£o:** ‚úÖ **COMPLETA**
